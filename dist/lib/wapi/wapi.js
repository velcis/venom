(()=>{"use strict";var e={596:function(e,t,n){var i;!function(o){function a(e,t,n){var i,o,a,r,s,p,h,A,m,P=0,I=[],y=0,b=!1,W=[],S=[],M=!1,v=!1,C=-1;if(i=(n=n||{}).encoding||"UTF8",(m=n.numRounds||1)!==parseInt(m,10)||1>m)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)s=512,p=B,h=L,r=160,A=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(p=function(t,n){return D(t,n,e)},h=function(t,n,i,o){var a,r;if("SHA-224"===e||"SHA-256"===e)a=15+(n+65>>>9<<4),r=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");a=31+(n+129>>>10<<5),r=32}for(;t.length<=a;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=i,t[a]=4294967295&n,t[a-1]=n/4294967296|0,i=t.length,n=0;n<i;n+=r)o=D(t.slice(n,n+r),o,e);if("SHA-224"===e)t=[o[0],o[1],o[2],o[3],o[4],o[5],o[6]];else if("SHA-256"===e)t=o;else if("SHA-384"===e)t=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b,o[6].a,o[6].b,o[7].a,o[7].b]}return t},A=function(e){return e.slice()},"SHA-224"===e)s=512,r=224;else if("SHA-256"===e)s=512,r=256;else if("SHA-384"===e)s=1024,r=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");s=1024,r=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var _=6;if(p=G,A=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},C=1,"SHA3-224"===e)s=1152,r=224;else if("SHA3-256"===e)s=1088,r=256;else if("SHA3-384"===e)s=832,r=384;else if("SHA3-512"===e)s=576,r=512;else if("SHAKE128"===e)s=1344,r=-1,_=31,v=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");s=1088,r=-1,_=31,v=!0}h=function(e,t,n,i,o){var a,r=_,d=[],c=(n=s)>>>5,l=0,u=t>>>5;for(a=0;a<u&&t>=n;a+=c)i=G(e.slice(a,a+c),i),t-=n;for(e=e.slice(a),t%=n;e.length<c;)e.push(0);for(e[(a=t>>>3)>>2]^=r<<a%4*8,e[c-1]^=2147483648,i=G(e,i);32*d.length<o&&(e=i[l%5][l/5|0],d.push(e.b),!(32*d.length>=o));)d.push(e.a),0==64*(l+=1)%n&&G(null,i);return d}}a=g(t,i,C),o=z(e),this.setHMACKey=function(t,n,a){var d;if(!0===b)throw Error("HMAC key already set");if(!0===M)throw Error("Cannot set HMAC key after calling update");if(!0===v)throw Error("SHAKE is not supported for HMAC");if(t=(n=g(n,i=(a||{}).encoding||"UTF8",C)(t)).binLen,n=n.value,a=(d=s>>>3)/4-1,d<t/8){for(n=h(n,t,0,z(e),r);n.length<=a;)n.push(0);n[a]&=4294967040}else if(d>t/8){for(;n.length<=a;)n.push(0);n[a]&=4294967040}for(t=0;t<=a;t+=1)W[t]=909522486^n[t],S[t]=1549556828^n[t];o=p(W,o),P=s,b=!0},this.update=function(e){var t,n,i,r=0,d=s>>>5;for(e=(t=a(e,I,y)).binLen,n=t.value,t=e>>>5,i=0;i<t;i+=d)r+s<=e&&(o=p(n.slice(i,i+d),o),r+=s);P+=r,I=n.slice(r>>>5),y=e%s,M=!0},this.getHash=function(t,n){var i,a,s,g;if(!0===b)throw Error("Cannot call getHash after setting HMAC key");if(s=f(n),!0===v){if(-1===s.shakeLen)throw Error("shakeLen must be specified in options");r=s.shakeLen}switch(t){case"HEX":i=function(e){return d(e,r,C,s)};break;case"B64":i=function(e){return c(e,r,C,s)};break;case"BYTES":i=function(e){return l(e,r,C)};break;case"ARRAYBUFFER":try{a=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}i=function(e){return u(e,r,C)};break;case"UINT8ARRAY":try{a=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}i=function(e){return w(e,r,C)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(g=h(I.slice(),y,P,A(o),r),a=1;a<m;a+=1)!0===v&&0!=r%32&&(g[g.length-1]&=16777215>>>24-r%32),g=h(g,r,0,z(e),r);return i(g)},this.getHMAC=function(t,n){var i,a,g,m;if(!1===b)throw Error("Cannot call getHMAC without first setting HMAC key");switch(g=f(n),t){case"HEX":i=function(e){return d(e,r,C,g)};break;case"B64":i=function(e){return c(e,r,C,g)};break;case"BYTES":i=function(e){return l(e,r,C)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}i=function(e){return u(e,r,C)};break;case"UINT8ARRAY":try{i=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}i=function(e){return w(e,r,C)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return a=h(I.slice(),y,P,A(o),r),m=p(S,z(e)),i(m=h(a,r,s,m,r))}}function r(e,t){this.a=e,this.b=t}function s(e,t,n,i){var o,a,r,s,d;for(t=t||[0],a=(n=n||0)>>>3,d=-1===i?3:0,o=0;o<e.length;o+=1)r=(s=o+a)>>>2,t.length<=r&&t.push(0),t[r]|=e[o]<<8*(d+s%4*i);return{value:t,binLen:8*e.length+n}}function d(e,t,n,i){var o,a,r,s="";for(t/=8,r=-1===n?3:0,o=0;o<t;o+=1)a=e[o>>>2]>>>8*(r+o%4*n),s+="0123456789abcdef".charAt(a>>>4&15)+"0123456789abcdef".charAt(15&a);return i.outputUpper?s.toUpperCase():s}function c(e,t,n,i){var o,a,r,s,d="",c=t/8;for(s=-1===n?3:0,o=0;o<c;o+=3)for(a=o+1<c?e[o+1>>>2]:0,r=o+2<c?e[o+2>>>2]:0,r=(e[o>>>2]>>>8*(s+o%4*n)&255)<<16|(a>>>8*(s+(o+1)%4*n)&255)<<8|r>>>8*(s+(o+2)%4*n)&255,a=0;4>a;a+=1)d+=8*o+6*a<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-a)&63):i.b64Pad;return d}function l(e,t,n){var i,o,a,r="";for(t/=8,a=-1===n?3:0,i=0;i<t;i+=1)o=e[i>>>2]>>>8*(a+i%4*n)&255,r+=String.fromCharCode(o);return r}function u(e,t,n){t/=8;var i,o,a,r=new ArrayBuffer(t);for(a=new Uint8Array(r),o=-1===n?3:0,i=0;i<t;i+=1)a[i]=e[i>>>2]>>>8*(o+i%4*n)&255;return r}function w(e,t,n){t/=8;var i,o,a=new Uint8Array(t);for(o=-1===n?3:0,i=0;i<t;i+=1)a[i]=e[i>>>2]>>>8*(o+i%4*n)&255;return a}function f(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function g(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,i){var o,a,r,s,d,c,l=e.length;if(0!=l%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],d=(i=i||0)>>>3,c=-1===n?3:0,o=0;o<l;o+=2){if(a=parseInt(e.substr(o,2),16),isNaN(a))throw Error("String of HEX type contains invalid characters");for(r=(s=(o>>>1)+d)>>>2;t.length<=r;)t.push(0);t[r]|=a<<8*(c+s%4*n)}return{value:t,binLen:4*l+i}};break;case"TEXT":e=function(e,i,o){var a,r,s,d,c,l,u,w,f=0;if(i=i||[0],c=(o=o||0)>>>3,"UTF8"===t)for(w=-1===n?3:0,s=0;s<e.length;s+=1)for(r=[],128>(a=e.charCodeAt(s))?r.push(a):2048>a?(r.push(192|a>>>6),r.push(128|63&a)):55296>a||57344<=a?r.push(224|a>>>12,128|a>>>6&63,128|63&a):(s+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(s)),r.push(240|a>>>18,128|a>>>12&63,128|a>>>6&63,128|63&a)),d=0;d<r.length;d+=1){for(l=(u=f+c)>>>2;i.length<=l;)i.push(0);i[l]|=r[d]<<8*(w+u%4*n),f+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(w=-1===n?2:0,r="UTF16LE"===t&&1!==n||"UTF16LE"!==t&&1===n,s=0;s<e.length;s+=1){for(a=e.charCodeAt(s),!0===r&&(a=(d=255&a)<<8|a>>>8),l=(u=f+c)>>>2;i.length<=l;)i.push(0);i[l]|=a<<8*(w+u%4*n),f+=2}return{value:i,binLen:8*f+o}};break;case"B64":e=function(e,t,i){var o,a,r,s,d,c,l,u,w=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(a=e.indexOf("="),e=e.replace(/\=/g,""),-1!==a&&a<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],c=(i=i||0)>>>3,u=-1===n?3:0,a=0;a<e.length;a+=4){for(d=e.substr(a,4),r=s=0;r<d.length;r+=1)s|=(o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d.charAt(r)))<<18-6*r;for(r=0;r<d.length-1;r+=1){for(o=(l=w+c)>>>2;t.length<=o;)t.push(0);t[o]|=(s>>>16-8*r&255)<<8*(u+l%4*n),w+=1}}return{value:t,binLen:8*w+i}};break;case"BYTES":e=function(e,t,i){var o,a,r,s,d,c;for(t=t||[0],r=(i=i||0)>>>3,c=-1===n?3:0,a=0;a<e.length;a+=1)o=e.charCodeAt(a),s=(d=a+r)>>>2,t.length<=s&&t.push(0),t[s]|=o<<8*(c+d%4*n);return{value:t,binLen:8*e.length+i}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,i){return s(new Uint8Array(e),t,i,n)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,i){return s(e,t,i,n)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function p(e,t){return e<<t|e>>>32-t}function h(e,t){return 32<t?(t-=32,new r(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new r(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function A(e,t){return e>>>t|e<<32-t}function m(e,t){var n;return n=new r(e.a,e.b),32>=t?new r(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new r(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function P(e,t){return 32>=t?new r(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new r(0,e.a>>>t-32)}function I(e,t,n){return e&t^~e&n}function y(e,t,n){return new r(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function b(e,t,n){return e&t^e&n^t&n}function W(e,t,n){return new r(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function S(e){return A(e,2)^A(e,13)^A(e,22)}function M(e){var t=m(e,28),n=m(e,34);return e=m(e,39),new r(t.a^n.a^e.a,t.b^n.b^e.b)}function v(e){return A(e,6)^A(e,11)^A(e,25)}function C(e){var t=m(e,14),n=m(e,18);return e=m(e,41),new r(t.a^n.a^e.a,t.b^n.b^e.b)}function _(e){return A(e,7)^A(e,18)^e>>>3}function T(e){var t=m(e,1),n=m(e,8);return e=P(e,7),new r(t.a^n.a^e.a,t.b^n.b^e.b)}function k(e){return A(e,17)^A(e,19)^e>>>10}function E(e){var t=m(e,19),n=m(e,61);return e=P(e,6),new r(t.a^n.a^e.a,t.b^n.b^e.b)}function O(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function x(e,t,n,i){var o=(65535&e)+(65535&t)+(65535&n)+(65535&i);return((e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(o>>>16)&65535)<<16|65535&o}function U(e,t,n,i,o){var a=(65535&e)+(65535&t)+(65535&n)+(65535&i)+(65535&o);return((e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(o>>>16)+(a>>>16)&65535)<<16|65535&a}function j(e,t){var n,i,o;return n=(65535&e.b)+(65535&t.b),o=(65535&(i=(e.b>>>16)+(t.b>>>16)+(n>>>16)))<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(i>>>16),new r((65535&(i=(e.a>>>16)+(t.a>>>16)+(n>>>16)))<<16|65535&n,o)}function R(e,t,n,i){var o,a,s;return o=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&i.b),s=(65535&(a=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(i.b>>>16)+(o>>>16)))<<16|65535&o,o=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&i.a)+(a>>>16),new r((65535&(a=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(i.a>>>16)+(o>>>16)))<<16|65535&o,s)}function F(e,t,n,i,o){var a,s,d;return a=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&i.b)+(65535&o.b),d=(65535&(s=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(i.b>>>16)+(o.b>>>16)+(a>>>16)))<<16|65535&a,a=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&i.a)+(65535&o.a)+(s>>>16),new r((65535&(s=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(i.a>>>16)+(o.a>>>16)+(a>>>16)))<<16|65535&a,d)}function N(e,t){return new r(e.a^t.a,e.b^t.b)}function z(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new r(3418070365,n[0]),new r(1654270250,n[1]),new r(2438529370,n[2]),new r(355462360,n[3]),new r(1731405415,n[4]),new r(41048885895,n[5]),new r(3675008525,n[6]),new r(1203062813,n[7])];break;case"SHA-512":n=[new r(t[0],4089235720),new r(t[1],2227873595),new r(t[2],4271175723),new r(t[3],1595750129),new r(t[4],2917565137),new r(t[5],725511199),new r(t[6],4215389547),new r(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)n[e]=[new r(0,0),new r(0,0),new r(0,0),new r(0,0),new r(0,0)]}return n}function B(e,t){var n,i,o,a,r,s,d,c=[];for(n=t[0],i=t[1],o=t[2],a=t[3],r=t[4],d=0;80>d;d+=1)c[d]=16>d?e[d]:p(c[d-3]^c[d-8]^c[d-14]^c[d-16],1),s=20>d?U(p(n,5),i&o^~i&a,r,1518500249,c[d]):40>d?U(p(n,5),i^o^a,r,1859775393,c[d]):60>d?U(p(n,5),b(i,o,a),r,2400959708,c[d]):U(p(n,5),i^o^a,r,3395469782,c[d]),r=a,a=o,o=p(i,30),i=n,n=s;return t[0]=O(n,t[0]),t[1]=O(i,t[1]),t[2]=O(o,t[2]),t[3]=O(a,t[3]),t[4]=O(r,t[4]),t}function L(e,t,n,i){var o;for(o=15+(t+65>>>9<<4);e.length<=o;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[o]=4294967295&t,e[o-1]=t/4294967296|0,t=e.length,o=0;o<t;o+=16)i=B(e.slice(o,o+16),i);return i}function D(e,t,n){var i,o,a,s,d,c,l,u,w,f,g,p,h,A,m,P,N,z,B,L,D,G,q,V=[];if("SHA-224"===n||"SHA-256"===n)f=64,p=1,G=Number,h=O,A=x,m=U,P=_,N=k,z=S,B=v,D=b,L=I,q=H;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");f=80,p=2,G=r,h=j,A=R,m=F,P=T,N=E,z=M,B=C,D=W,L=y,q=K}for(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],d=t[5],c=t[6],l=t[7],g=0;g<f;g+=1)16>g?(w=g*p,u=e.length<=w?0:e[w],w=e.length<=w+1?0:e[w+1],V[g]=new G(u,w)):V[g]=A(N(V[g-2]),V[g-7],P(V[g-15]),V[g-16]),u=m(l,B(s),L(s,d,c),q[g],V[g]),w=h(z(n),D(n,i,o)),l=c,c=d,d=s,s=h(a,u),a=o,o=i,i=n,n=h(u,w);return t[0]=h(n,t[0]),t[1]=h(i,t[1]),t[2]=h(o,t[2]),t[3]=h(a,t[3]),t[4]=h(s,t[4]),t[5]=h(d,t[5]),t[6]=h(c,t[6]),t[7]=h(l,t[7]),t}function G(e,t){var n,i,o,a,s=[],d=[];if(null!==e)for(i=0;i<e.length;i+=2)t[(i>>>1)%5][(i>>>1)/5|0]=N(t[(i>>>1)%5][(i>>>1)/5|0],new r(e[i+1],e[i]));for(n=0;24>n;n+=1){for(a=z("SHA3-"),i=0;5>i;i+=1){o=t[i][0];var c=t[i][1],l=t[i][2],u=t[i][3],w=t[i][4];s[i]=new r(o.a^c.a^l.a^u.a^w.a,o.b^c.b^l.b^u.b^w.b)}for(i=0;5>i;i+=1)d[i]=N(s[(i+4)%5],h(s[(i+1)%5],1));for(i=0;5>i;i+=1)for(o=0;5>o;o+=1)t[i][o]=N(t[i][o],d[i]);for(i=0;5>i;i+=1)for(o=0;5>o;o+=1)a[o][(2*i+3*o)%5]=h(t[i][o],q[i][o]);for(i=0;5>i;i+=1)for(o=0;5>o;o+=1)t[i][o]=N(a[i][o],new r(~a[(i+1)%5][o].a&a[(i+2)%5][o].a,~a[(i+1)%5][o].b&a[(i+2)%5][o].b));t[0][0]=N(t[0][0],V[n])}return t}var H,K,q,V;K=[new r((H=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new r(H[1],602891725),new r(H[2],3964484399),new r(H[3],2173295548),new r(H[4],4081628472),new r(H[5],3053834265),new r(H[6],2937671579),new r(H[7],3664609560),new r(H[8],2734883394),new r(H[9],1164996542),new r(H[10],1323610764),new r(H[11],3590304994),new r(H[12],4068182383),new r(H[13],991336113),new r(H[14],633803317),new r(H[15],3479774868),new r(H[16],2666613458),new r(H[17],944711139),new r(H[18],2341262773),new r(H[19],2007800933),new r(H[20],1495990901),new r(H[21],1856431235),new r(H[22],3175218132),new r(H[23],2198950837),new r(H[24],3999719339),new r(H[25],766784016),new r(H[26],2566594879),new r(H[27],3203337956),new r(H[28],1034457026),new r(H[29],2466948901),new r(H[30],3758326383),new r(H[31],168717936),new r(H[32],1188179964),new r(H[33],1546045734),new r(H[34],1522805485),new r(H[35],2643833823),new r(H[36],2343527390),new r(H[37],1014477480),new r(H[38],1206759142),new r(H[39],344077627),new r(H[40],1290863460),new r(H[41],3158454273),new r(H[42],3505952657),new r(H[43],106217008),new r(H[44],3606008344),new r(H[45],1432725776),new r(H[46],1467031594),new r(H[47],851169720),new r(H[48],3100823752),new r(H[49],1363258195),new r(H[50],3750685593),new r(H[51],3785050280),new r(H[52],3318307427),new r(H[53],3812723403),new r(H[54],2003034995),new r(H[55],3602036899),new r(H[56],1575990012),new r(H[57],1125592928),new r(H[58],2716904306),new r(H[59],442776044),new r(H[60],593698344),new r(H[61],3733110249),new r(H[62],2999351573),new r(H[63],3815920427),new r(3391569614,3928383900),new r(3515267271,566280711),new r(3940187606,3454069534),new r(4118630271,4000239992),new r(116418474,1914138554),new r(174292421,2731055270),new r(289380356,3203993006),new r(460393269,320620315),new r(685471733,587496836),new r(852142971,1086792851),new r(1017036298,365543100),new r(1126000580,2618297676),new r(1288033470,3409855158),new r(1501505948,4234509866),new r(1607167915,987167468),new r(1816402316,1246189591)],V=[new r(0,1),new r(0,32898),new r(2147483648,32906),new r(2147483648,2147516416),new r(0,32907),new r(0,2147483649),new r(2147483648,2147516545),new r(2147483648,32777),new r(0,138),new r(0,136),new r(0,2147516425),new r(0,2147483658),new r(0,2147516555),new r(2147483648,139),new r(2147483648,32905),new r(2147483648,32771),new r(2147483648,32770),new r(2147483648,128),new r(0,32778),new r(2147483648,2147483658),new r(2147483648,2147516545),new r(2147483648,32896),new r(0,2147483649),new r(2147483648,2147516424)],q=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()},321:(e,t,n)=>{n.r(t),n.d(t,{storeObjects:()=>i});const i=[{id:"Store",conditions:e=>e.default&&e.default.Chat&&e.default.Msg?e.default:null},{id:"MediaCollection",conditions:e=>e.default&&e.default.prototype&&(void 0!==e.default.prototype.processFiles||void 0!==e.default.prototype.processAttachments)?e.default:null},{id:"MediaProcess",conditions:e=>e.BLOB?e:null},{id:"ChatUtil",conditions:e=>e.sendClear?e:null},{id:"GroupInvite",conditions:e=>e.sendQueryGroupInviteCode&&e.sendRevokeGroupInviteCode?e:null},{id:"Wap",conditions:e=>e.createGroup?e:null},{id:"ServiceWorker",conditions:e=>e.default&&e.default.killServiceWorker?e:null},{id:"Stream",conditions:e=>e.Stream&&e.StreamInfo?e.Stream:null},{id:"Wid",conditions:e=>e.validateWid?e:null},{id:"State",conditions:e=>e.Socket?e:null},{id:"WapDelete",conditions:e=>e.sendConversationDelete&&e.sendConversationDelete.length>1?e:null},{id:"WapDeleteMsg",conditions:e=>e.sendRevokeMsgs&&e.sendGroupInviteMessage?e:null},{id:"Conn",conditions:e=>e.default&&e.default.ref&&e.default.refTTL?e.default:null},{id:"ConversationMsgs",conditions:e=>e.loadEarlierMsgs?e:null},{id:"WapQuery",conditions:e=>e.default&&e.default.queryExist&&e.default.getCapabilities?e.default:null},{id:"CryptoLib",conditions:e=>e.decryptE2EMedia?e:null},{id:"OpenChat",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.openChat?e.default:null},{id:"UserConstructor",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.isServer&&e.default.prototype.isUser?e.default:null},{id:"SendTextMsgToChat",conditions:e=>e.sendTextMsgToChat?e.sendTextMsgToChat:null},{id:"SendSeen",conditions:e=>e.sendSeen?e.sendSeen:null},{id:"Archive",conditions:e=>e.setArchive?e:null},{id:"pinChat",conditions:e=>e.setPin?e:null},{id:"sendDelete",conditions:e=>e.sendDelete?e.sendDelete:null},{id:"addAndSendMsgToChat",conditions:e=>e.addAndSendMsgToChat?e.addAndSendMsgToChat:null},{id:"sendMsgToChat",conditions:e=>e.sendMsgToChat?e.sendMsgToChat:null},{id:"Catalog",conditions:e=>e.Catalog?e.Catalog:null},{id:"Perfil",conditions:e=>!0===e.__esModule&&e.setPushname&&!e.getComposeContents?e:null},{id:"MsgKey",conditions:e=>e.default&&e.default.toString&&"function"==typeof e.default.toString&&e.default.toString().includes("MsgKey error: obj is null/undefined")?e.default:null},{id:"Parser",conditions:e=>e.convertToTextWithoutSpecialEmojis?e.default:null},{id:"Builders",conditions:e=>e.TemplateMessage&&e.HydratedFourRowTemplate?e:null},{id:"Me",conditions:e=>e.PLATFORMS&&e.Conn?e.Conn:null},{id:"CallUtils",conditions:e=>e.sendCallEnd&&e.parseCall?e:null},{id:"Identity",conditions:e=>e.queryIdentity&&e.updateIdentity?e:null},{id:"MyStatus",conditions:e=>e.getStatus&&e.setMyStatus&&e.queryStatusAll?e:null},{id:"ChatState",conditions:e=>e.sendChatStatePaused&&e.sendChatStateRecording&&e.sendChatStateComposing?e:null},{id:"sendDeleteMsgs",conditions:e=>e.sendDeleteMsgs?e.sendDeleteMsgs:null},{id:"GroupActions",conditions:e=>e.sendExitGroup&&e.localExitGroup?e:null},{id:"Features",conditions:e=>e.FEATURE_CHANGE_EVENT&&e.features?e:null},{id:"MessageUtils",conditions:e=>e.storeMessages&&e.appendMessage?e:null},{id:"WebMessageInfo",conditions:e=>e.WebMessageInfo&&e.WebFeatures?e.WebMessageInfo:null},{id:"createMessageKey",conditions:e=>e.createMessageKey&&e.createDeviceSentMessage?e.createMessageKey:null},{id:"Participants",conditions:e=>e.addParticipants&&e.removeParticipants&&e.promoteParticipants&&e.demoteParticipants?e:null},{id:"WidFactory",conditions:e=>e.isWidlike&&e.createWid&&e.createWidFromWidLike?e:null},{id:"Base",conditions:e=>e.setSubProtocol&&e.binSend&&e.actionNode?e:null},{id:"Base2",conditions:e=>e.supportsFeatureFlags&&e.parseMsgStubProto&&e.binSend&&e.subscribeLiveLocation?e:null},{id:"Sticker",conditions:e=>e.StickerCollection&&e.default?e:null},{id:"MediaObject",conditions:e=>e.getOrCreateMediaObject&&e.disassociateMediaFromStickerPack?e:null},{id:"MediaUpload",conditions:e=>e.default&&e.default.mediaUpload?e.default:null},{id:"UploadUtils",conditions:e=>e.default&&e.default.encryptAndUpload?e.default:null},{id:"Cmd",conditions:e=>e.Cmd&&e.Cmd.openChatFromUnread?e.Cmd:null},{id:"checkNumberMD",conditions:e=>e.queryExists&&e.queryPhoneExists?e:null},{id:"ReadSeen",conditions:e=>e.sendSeen?e:null},{id:"Block",conditions:e=>e.blockContact&&e.unblockContact?e:null},{id:"BlockList",conditions:e=>e.BlocklistCollection?e:null},{id:"Theme",conditions:e=>e.getTheme&&e.setTheme?e:null},{id:"Vcard",conditions:e=>e.vcardFromContactModel?e:null},{id:"Profile",conditions:e=>e.sendSetPicture&&e.requestDeletePicture?e:null},{id:"SendMute",conditions:e=>e.sendConversationMute?e:null},{id:"Validators",conditions:e=>e.findLinks?e:null},{id:"Wap2",conditions:e=>e.Wap?e:null},{id:"genId",conditions:e=>e.default&&"function"==typeof e.default&&e.default.toString().match(/crypto/)?e:null},{id:"GroupMetadata",conditions:e=>e.default&&e.default.handlePendingInvite?e:null},{id:"i10n",conditions:e=>e.default&&e.default.downloadAppLocale?e.default:null},{id:"NetworkStatus",conditions:e=>e.default&&e.default._logOnlineOffline?e.default:null},{id:"ws2",conditions:e=>e.default&&e.default.destroyStorage?e.default:null},{id:"Login",conditions:e=>e.startLogout?e:null},{id:"BlobCache",conditions:e=>e.default&&e.default.getOrCreateURL?e.default:null},{id:"infoGroup",conditions:e=>e.queryGroupInviteInfo?e:null},{id:"GroupDesc",conditions:e=>e.setGroupDesc?e:null},{id:"GroupTitle",conditions:e=>e.sendSetGroupSubject?e:null},{id:"GroupSettings",conditions:e=>e.sendSetGroupProperty?e:null},{id:"MaybeMeUser",conditions:e=>e.getMaybeMeUser?e:null},{id:"sendCreateGroup",conditions:e=>e.sendCreateGroup?e.sendCreateGroup:null},{id:"sendAddParticipants",conditions:e=>e.sendAddParticipants?e.sendAddParticipants:null},{id:"sendRemoveParticipants",conditions:e=>e.sendRemoveParticipants?e.sendRemoveParticipants:null},{id:"sendPromoteParticipants",conditions:e=>e.sendPromoteParticipants?e.sendPromoteParticipants:null},{id:"sendDemoteParticipants",conditions:e=>e.sendDemoteParticipants?e.sendDemoteParticipants:null},{id:"checkNumberBeta",conditions:e=>e.queryExists&&e.queryPhoneExists?e:null},{id:"checkNumber",conditions:e=>e.default&&e.default.queryExist?e.default:null}]}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{function e(e,t){try{const n=e.split(",");let i=n[0].match(/(?:data:)?(.*?)(?:;base64)?$/i)[1];i=i.split(/\s+;\s+/).join("; ");const o=window.Base64?window.Base64.atob(n[1]):atob(n[1]);let a=o.length;const r=new Uint8Array(a);for(;a--;)r[a]=o.charCodeAt(a);return new File([r],t,{type:i})}catch{return!1}}var t=n(596);async function i(e){let n=await e.arrayBuffer();var i=new t("SHA-256","ARRAYBUFFER");return i.update(n),i.getHash("B64")}function o(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function a(e){try{return new Promise((t=>setTimeout(t,e)))}catch(e){}}const r=function(e){return e.unreadCount>0},s=function(e){const t=window.Store.Chat.filter(r).map((e=>WAPI._serializeChatObj(e)));return void 0!==e&&e(t),t};async function d(e){return(await WAPI.getGroupMetadata(e)).participants}async function c(e,t){const n=window.WAPI.getChat(e);for(;!n.msgs.msgLoadState.noEarlierMsgs;)console.log("Loading..."),await window.Store.ConversationMsgs.loadEarlierMsgs(n);return console.log("done"),!0}async function l(e,t){Array.isArray(t)||(t=[t]);const n=new Store.MediaCollection({chatParticipantCount:e.getParticipantCount()});return await n.processAttachments("0.4.613"===Debug.VERSION?t:t.map((e=>({file:e}))),e,1),n}async function u(t,n,i,o,a){if(a=a||"sendFile","string"!=typeof i&&null!=i||"string"!=typeof o&&null!=o)return WAPI.scope(n,!0,null,"incorrect parameter, insert an string.");var r=t.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);r&&r.length&&(r=r[1]);var s=await WAPI.sendExist(n);if(s.erro)return s;var d=e(t,i),c=await l(s,d),u=(c.models||c._models)[0],w=await u.sendToChat(s,{caption:o})||"",f={type:a,filename:i,text:o,mimeType:r},g=await WAPI.getchatId(s.id);if("success"===w||"OK"===w){var p=WAPI.scope(g,!1,w,null);return Object.assign(p,f),p}return p=WAPI.scope(g,!0,w,null),Object.assign(p,f),p}async function w(e,t,n,i){const o=await WAPI.sendExist(t);if(o.erro)return o;{const a=await window.WAPI.getNewMessageId(o.id._serialized),r=await Store.MaybeMeUser.getMaybeMeUser(),s=await WAPI.getchatId(o.id).catch((()=>WAPI.scope(o.id,!0,404,"Error to number "+t)));s&&(o.lastReceivedKey&&o.lastReceivedKey._serialized&&(o.lastReceivedKey._serialized=s._serialized),o.lastReceivedKey&&o.lastReceivedKey.id&&(o.lastReceivedKey.id=s.id));const d={id:a,ack:0,encFilehash:e.uploadhash,from:r,to:o.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"sticker",deprecatedMms3Url:e.clientUrl,filehash:e.filehash,mediaKey:e.mediaKey,mimetype:"image/webp",height:n&&n.height?n.height:512,width:n&&n.width?n.width:512},c=(await Promise.all(window.Store.addAndSendMsgToChat(o,d)))[1],l={type:i};if("success"===c||"OK"===c){const e=WAPI.scope(a,!1,c,null);return Object.assign(e,l),e}const u=WAPI.scope(a,!0,c,null);return Object.assign(u,l),u}}async function f(t,n,i,o){const a=e("data:image/webp;base64,"+t,"file.webp");let r=await window.WAPI.encryptAndUploadFile("sticker",a);return await w(r,n,i,o)}let g={};const{storeObjects:p}=n(321);window.webpackChunkwhatsapp_web_client=window.webpackChunkwhatsapp_web_client||[],window.Store={},async function(){for(;;){try{const e=window.webpackChunkwhatsapp_web_client.length-1;if(!window.webpackChunkwhatsapp_web_client[e][0].includes("parasite")&&(document.querySelectorAll("#app").length||document.querySelectorAll("#app .two").length||document.querySelector("canvas")||0==document.querySelectorAll("#startup").length))return void window.webpackChunkwhatsapp_web_client.push([["parasite"],{},async function(e){let t=[];for(let n in e.m)t.push(e(n));!async function(e){let t=0,n=p;for(let i in e)if("object"==typeof e[i]&&null!==e[i]&&(n.forEach((n=>{if(!n.conditions||n.foundedModule)return;let o=n.conditions(e[i]);null!==o&&(t++,n.foundedModule=o)})),t==n.length))break;let i=n.find((e=>"Store"===e.id));window.Store=i.foundedModule?i.foundedModule:{},n.splice(n.indexOf(i),1),n.forEach((e=>{e.foundedModule&&(window.Store[e.id]=e.foundedModule)})),window.Store.sendMessage=function(e){return window.Store.SendTextMsgToChat(this,...arguments)},window.Store.Chat.modelClass.prototype.sendMessage=function(e){window.Store.SendTextMsgToChat(this,...arguments)},window.Store.MediaCollection&&(window.Store.MediaCollection.prototype.processFiles=window.Store.MediaCollection.prototype.processFiles||window.Store.MediaCollection.prototype.processAttachments),Store.Chat._findAndParse=Store.BusinessProfile._findAndParse,Store.Chat._find=Store.BusinessProfile._find,window.Store}(t)}])}catch(e){}await a(1e3)}}(),void 0===window.WAPI&&(window.WAPI={lastRead:{}},window.WAPI.interfaceMute=function(e){let{attributes:t,expiration:n,id:i,isMuted:o,isState:a,promises:r,stale:s}=e;return{attributes:t,expiration:n,id:i,isMuted:o,isState:a,promises:r,stale:s}},window.WAPI.checkIdMessage=async function(e,t){if("string"!=typeof e)return WAPI.scope(null,!0,404,"enter the chatId variable as an string");const n=await WAPI.sendExist(e);if(n&&404!=n.status){if(!await window.Store.Msg.get(t))return WAPI.scope(n,!0,404,`The id ${t} does not exist!`);const e=n.id,i={type:"checkIdMessage"};let o=WAPI.scope(e,!1,"OK","");return Object.assign(o,i),o}return n},window.WAPI.returnReply=async function(e){return"object"!=typeof e?WAPI.scope(null,!0,404,"enter the message variable as an object"):!!(e&&e.quotedMsg&&e.quotedMsg.type&&e.quotedMsgObj)&&e.quotedMsgObj},window.WAPI.checkChat=async function(e){try{if("string"==typeof e&&(e.includes("@g.us")||e.includes("@c.us")||e.includes("@broadcast"))){const t=await Store.Chat.get(e);if(t&&t.t)return WAPI.scope(void 0,!1,200,null,WAPI._serializeChatObj(t));throw 404}throw 400}catch(e){return WAPI.scope(void 0,!0,e,"Was not found")}},window.WAPI.checkNumberStatus=async function(e,t=!1){try{const n={error:404},i=window.Store&&window.Store.State&&window.Store.State.Socket&&window.Store.State.Socket.state?window.Store.State.Socket.state:"";if(!0===t&&"CONNECTED"!==i)throw Object.assign(n,{text:"No connection with WhatsApp",connection:i,numberExists:null}),n;const o=await WAPI.getChat(e);if(o)return await Store.checkNumberMD.queryExists(o.id).then((e=>{if(e&&"object"==typeof e)return{status:200,numberExists:!0,id:e.wid};throw Object.assign(n,{connection:i,numberExists:!1,text:"The number does not exist"})})).catch((e=>{if(e.text)throw e;throw Object.assign(e,{connection:i,numberExists:!1,text:e})}));throw Object.assign(n,{connection:i,numberExists:!1})}catch(e){return{status:e.error,text:e.text,numberExists:e.numberExists,connection:e.connection}}},window.WAPI.sendCheckType=function(e){if(!e)return WAPI.scope(e,!0,404,"It is necessary to pass a number!");if("string"==typeof e){const t="@c.us",n="@broadcast",i="@g.us";if(t!==e.substr(-t.length,t.length)&&n!==e.substr(-n.length,n.length)&&i!==e.substr(-i.length,i.length))return WAPI.scope(e,!0,404,"The chat number must contain the parameters @c.us, @broadcast or @g.us. At the end of the number!");if(t===e.substr(-t.length,t.length)&&(e.match(/(@c.us)/g)&&e.match(/(@c.us)/g).length>1||!e.match(/^(\d+(\d)*@c.us)$/g)))return WAPI.scope(e,!0,404,"incorrect parameters! Use as an example: 000000000000@c.us");if(n===e.substr(-n.length,n.length)&&(e.match(/(@broadcast)/g)&&e.match(/(@broadcast)/g).length>1||!e.match(/^(\d+(\d)*@broadcast)$/g)))return WAPI.scope(e,!0,404,"incorrect parameters! Use as an example: 0000000000@broadcast");if(i===e.substr(-i.length,i.length)&&e.match(/(@g.us)/g)&&e.match(/(@g.us)/g).length>1)return WAPI.scope(e,!0,404,"incorrect parameters! Use as an example: 00000000-000000@g.us or 00000000000000@g.us");if(!Store.WidFactory.isWidlike(e))return WAPI.scope(e,!0,404,"The number does not exist. Invalid wid!")}},window.WAPI.isBeta=function(){return!(window.localStorage.getItem("WASecretBundle")||window.localStorage.getItem("WAToken1")||window.localStorage.getItem("WAToken2"))},window.WAPI.setProfilePic=async function(e,t){t||(t=await Store.MaybeMeUser.getMaybeMeUser());let n="data:image/jpeg;base64,";return await Store.Profile.sendSetPicture(t._serialized,n+e.b,n+e.a)},window.WAPI.getSessionTokenBrowser=async function(){if(window.localStorage){var e=await JSON.parse(JSON.stringify(window.localStorage));let{WABrowserId:t,WASecretBundle:n,WAToken1:i,WAToken2:o}=e;return{WABrowserId:t,WASecretBundle:n,WAToken1:i,WAToken2:o}}},window.WAPI.scope=function(e,t,n,i=null,o=null){return{me:WAPI.getHost(),to:e,erro:t,text:i,status:n,result:o}},window.WAPI.getchatId=async function(e){if(e){let t=await WAPI.getChatById(e);if(t&&"object"==typeof t){let e=t.lastReceivedKey;if(e&&"object"==typeof e){let n={formattedName:t.contact.formattedName,isBusiness:t.contact.isBusiness,isMyContact:t.contact.isMyContact,verifiedName:t.contact.verifiedName,pushname:t.contact.pushname,isOnline:t.isOnline};return Object.assign(e,n),e}}}},window.WAPI.sendExist=async function(e,t=!0,n=!0){const i=await WAPI.sendCheckType(e);if(i&&404===i.status)return i;let o=await window.WAPI.checkNumberStatus(e,!1);if(404===o.status||o&&o.text&&"function"==typeof o.text.includes&&o.text.includes("XmppParsingFailure"))return WAPI.scope(e,!0,o.status,"The number does not exist");const a=new window.Store.WidFactory.createWid(e);let r=o&&o.id&&o.id._serialized?await window.WAPI.getChat(o.id._serialized):void 0;if(o.numberExists&&void 0===r){var s=new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0});r=await window.Store.Chat.find(s)}if(!r){const e=await window.Store.Chat.find(a);e&&(r=e&&e.id&&e.id._serialized?await window.WAPI.getChat(e.id._serialized):void 0)}return o.numberExists||r.t||!r.isUser?o.numberExists||r.t||!r.isGroup?r?(n&&await window.Store.ReadSeen.sendSeen(r,!1),t?r:window.WAPI.scope(e,!1,200)):window.WAPI.scope(e,!0,404):window.WAPI.scope(e,!0,o.status,"The group number does not exist on your chat list, or it does not exist at all!"):window.WAPI.scope(e,!0,o.status,"The number does not exist")},window.WAPI.pinChat=async function(e,t=!0,n=!1){if("boolean"!=typeof t||"boolean"!=typeof n)return WAPI.scope(e,!0,null,"incorrect parameter, insert a boolean true or false");let i,o=t?"pin":"unpin";var a=await WAPI.sendExist(e,!0,n);if(a.erro)return a;var r={type:"pinChat",typefix:o},s=await WAPI.getchatId(a.id);return await Store.pinChat.setPin(a,t).then((e=>{var t=WAPI.scope(s,!1,"OK",null);Object.assign(t,r),i=t})).catch((e=>{var t=WAPI.scope(s,!0,e,"Pin Chat first");Object.assign(t,r),i=t})),i},window.WAPI.setTheme=async function(e){return"dark"==e||"light"==e?(await Store.Theme.setTheme(e),!0):console.error("Use type dark or light")},window.WAPI.getTheme=async function(){return await Store.Theme.getTheme()},window.WAPI._serializeRawObj=e=>e&&e.toJSON?e.toJSON():{},window.WAPI._serializeChatObj=e=>null==e?null:Object.assign(window.WAPI._serializeRawObj(e),{kind:e.kind,isGroup:e.isGroup,contact:e.contact?window.WAPI._serializeContactObj(e.contact):null,groupMetadata:e.groupMetadata?window.WAPI._serializeRawObj(e.groupMetadata):null,presence:e.presence?window.WAPI._serializeRawObj(e.presence):null,msgs:null,isOnline:e.__x_presence.attributes.isOnline||null,lastSeen:e&&e.previewMessage&&e.previewMessage.__x_ephemeralStartTimestamp?1e3*e.previewMessage.__x_ephemeralStartTimestamp:null}),window.WAPI._serializeContactObj=e=>null==e?null:(!e.profilePicThumb&&e.id&&window.Store.ProfilePicThumb&&(e.profilePicThumb=window.Store.ProfilePicThumb.get(e.id)),Object.assign(window.WAPI._serializeRawObj(e),{formattedName:e.formattedName,displayName:e.displayName,formattedShortName:e.formattedShortName,formattedShortNameWithNonBreakingSpaces:e.formattedShortNameWithNonBreakingSpaces,isHighLevelVerified:e.isHighLevelVerified,isMe:e.isMe,mentionName:e.mentionName,notifyName:e.notifyName,isMyContact:e.isMyContact,isPSA:e.isPSA,isUser:e.isUser,isVerified:e.isVerified,isWAContact:e.isWAContact,profilePicThumbObj:e.profilePicThumb?WAPI._serializeProfilePicThumb(e.profilePicThumb):{},statusMute:e.statusMute,msgs:null})),window.WAPI._serializeMessageObj=e=>{if(null==e)return null;const t=e.chat?WAPI._serializeChatObj(e.chat):{};return e.quotedMsg&&e.quotedMsgObj(),Object.assign(window.WAPI._serializeRawObj(e),{id:e.id._serialized,from:e.from._serialized,quotedParticipant:e.quotedParticipant&&e.quotedParticipant._serialized?e.quotedParticipant._serialized:void 0,author:e.author&&e.author._serialized?e.author._serialized:void 0,chatId:e.id&&e.id.remote?e.id.remote:e.chatId&&e.chatId._serialized?e.chatId._serialized:void 0,to:e.to&&e.to._serialized?e.to._serialized:void 0,fromMe:e.id.fromMe,sender:e.senderObj?WAPI._serializeContactObj(e.senderObj):null,timestamp:e.t,content:e.body,body:e.body,isGroupMsg:e.isGroupMsg,isLink:e.isLink,isMMS:e.isMMS,isMedia:e.isMedia,isNotification:e.isNotification,isPSA:e.isPSA,type:e.type,chat:t,isOnline:t.isOnline,lastSeen:t.lastSeen,quotedMsgObj:e.quotedMsg,quotedStanzaId:e.quotedStanzaID?e.quotedStanzaID:void 0,mediaData:window.WAPI._serializeRawObj(e.mediaData),caption:e.caption,deprecatedMms3Url:e.deprecatedMms3Url,directPath:e.directPath,encFilehash:e.encFilehash,filehash:e.filehash,filename:e.filename,mimetype:e.mimetype,clientUrl:e.clientUrl,mediaKey:e.mediaKey,size:e.size,t:e.t,isNewMsg:e.isNewMsg,linkPreview:e.linkPreview,text:e.text,height:e.height,width:e.width,self:e.self,initialPageSize:e.initialPageSize,lat:e.lat?e.lat:void 0,lng:e.lng?e.lng:void 0,ack:e.ack,reply:n=>window.WAPI.reply(t.id._serialized,n,e)})},window.WAPI._serializeProfilePicThumb=e=>null==e?null:Object.assign({},{eurl:e.eurl,id:e.id,img:e.img,imgFull:e.imgFull,raw:e.raw,tag:e.tag}),window.WAPI._serializeMeObj=async e=>{if(null==e)return null;const t=window.Store&&window.Store.State&&window.Store.State.Socket&&window.Store.State.Socket.state?window.Store.State.Socket.state:void 0;let n;e&&e.id&&e.id.contact&&!e.id.contact.profilePicThumb&&e.id.id&&(n=await window.Store.ProfilePicThumb.get(e.id.id._serialized));const i={};if(!e.id)return i;Object.assign(i,{id:e.id.id?e.id.id:null,email:e.id.email?e.id.email:null,description:e.id.description?e.id.description:null,statusConnection:t,businessHours:{timezone:e.id.businessHours&&e.id.businessHours.timezone?e.id.businessHours.timezone:null},pushname:e.id.contact&&e.id.contact.pushname?e.id.contact.pushname:null,website:e.id.website?e.id.website:null,formattedTitle:e.id.formattedTitle?e.id.formattedTitle:null,categories:e.id.categories?e.id.categories:null,displayName:e.id.contact&&e.id.contact.displayName?e.id.contact.displayName:null,isBusiness:e.id.contact&&e.id.contact.isBusiness?e.id.contact.isBusiness:null,imgUrl:e.id.contact&&e.id.contact.profilePicThumb&&e.id.contact.profilePicThumb.eurl?e.id.contact.profilePicThumb.eurl:n&&n.eurl?n.eurl:null,imgFull:e.id.contact&&e.id.contact.profilePicThumb&&e.id.contact.profilePicThumb.imgFull?e.id.contact.profilePicThumb.imgFull:n&&n.imgFull?n.imgFull:null,previewEurl:e.id.contact&&e.id.contact.profilePicThumb&&e.id.contact.profilePicThumb.previewEurl?e.id.contact.profilePicThumb.previewEurl:n&&n.imgs?n.imgs:null});const o=Store.Me?Store.Me:void 0;return o&&o.wid&&o.wid._serialized&&i.id&&i.id._serialized&&o.wid&&o.wid._serialized&&i.id._serialized===o.wid._serialized&&o.phone&&Object.assign(i,{binVersion:o.binVersion?o.binVersion:null,allLocales:o.allLocales?o.allLocales:null,battery:o.battery?o.battery:null,phone:{device_manufacturer:o.phone.device_manufacturer?o.phone.device_manufacturer:null,device_model:o.phone.device_model?o.phone.device_model:null,os_build_number:o.phone.os_build_number?o.phone.os_build_number:null,os_version:o.phone.os_version?o.phone.os_version:null,wa_version:o.phone.wa_version?o.phone.wa_version:null}}),i},window.WAPI.createGroup=async function(e,t){return Array.isArray(t)||(t=[t]),!!(t=(t=await Promise.all(t.map((e=>WAPI.sendExist(e))))).filter((e=>!e.erro&&e.isUser)).map((e=>e.id))).length&&await Store.sendCreateGroup(e,t)},window.WAPI.leaveGroup=async function(e){e="string"==typeof e?e:e._serialized;var t=WAPI.getChat(e);return Store.GroupActions.sendExitGroup(t)},window.WAPI.revokeGroupInviteLink=async function(e){var t=Store.Chat.get(e);return!!t.isGroup&&await Store.GroupInvite.sendRevokeGroupInviteCode(t.id)},window.WAPI.getGroupInviteLink=async function(e){var t=Store.Chat.get(e);return t.isGroup?`https://chat.whatsapp.com/${await Store.GroupInvite.sendQueryGroupInviteCode(t.id)}`:""},window.WAPI.getGroupInfoFromInviteLink=async function(e){return await Store.infoGroup.queryGroupInviteInfo(e)},window.WAPI.getGroupAdmins=async function(e,t){const n=(await d(e)).filter((e=>e.isAdmin)).map((e=>e.id));return void 0!==t&&t(n),n},window.WAPI.removeParticipant=async function(e,t){const n=window.Store.WidFactory.createWid(e);if(Array.isArray(t)||(t=[t]),!(t=await Promise.all(t.map((e=>window.Store.WidFactory.createWid(e))))).length)return!1;const i=t.map((e=>window.Store.WidFactory.createWid(e)));return window.Store.sendRemoveParticipants(n,i)},window.WAPI.addParticipant=async function(e,t){const n=window.Store.WidFactory.createWid(e);if(Array.isArray(t)||(t=[t]),!(t=(t=await Promise.all(t.map((e=>WAPI.sendExist(e))))).filter((e=>!e.erro&&e.isUser)).map((e=>e.id))).length)return!1;const i=t.map((e=>window.Store.WidFactory.createWid(e)));return window.Store.sendAddParticipants(n,i)},window.WAPI.promoteParticipant=async function(e,t){const n=window.Store.WidFactory.createWid(e);if(Array.isArray(t)||(t=[t]),!(t=(t=await Promise.all(t.map((e=>WAPI.sendExist(e))))).filter((e=>!e.erro&&e.isUser)).map((e=>e.id))).length)return!1;const i=t.map((e=>window.Store.WidFactory.createWid(e)));return window.Store.sendPromoteParticipants(n,i)},window.WAPI.demoteParticipant=async function(e,t){const n=window.Store.WidFactory.createWid(e);if(Array.isArray(t)||(t=[t]),!(t=await Promise.all(t.map((e=>window.Store.WidFactory.createWid(e))))).length)return!1;const i=t.map((e=>window.Store.WidFactory.createWid(e)));return window.Store.sendDemoteParticipants(n,i)},window.WAPI.joinGroup=async function(e){return await Store.WapQuery.acceptGroupInvite(e)},window.WAPI.setGroupDescription=async function(e,t){if("string"!=typeof t||0===t.length)return WAPI.scope(void 0,!0,null,"It is necessary to write a text!");const n=await WAPI.sendExist(e);if(n&&404!=n.status){const e={type:"setGroupDescription",description:t},i=await WAPI.getchatId(n.id);return window.Store.GroupDesc.setGroupDesc(n,t).then((()=>{const n=WAPI.scope(i,!1,"OK",t);return Object.assign(n,e),n})).catch((()=>{const n=WAPI.scope(i,!0,"error",t);return Object.assign(n,e),n}))}return n},window.WAPI.setGroupTitle=async function(e,t){if("string"!=typeof t||0===t.length)return WAPI.scope(void 0,!0,null,"It is necessary to write a text!");const n=await WAPI.sendExist(e);if(n&&404!=n.status){const e={type:"setGroupTitle",title:t},i=await WAPI.getchatId(n.id);return window.Store.GroupTitle.sendSetGroupSubject(n.id,t).then((()=>{const n=WAPI.scope(i,!1,"OK",t);return Object.assign(n,e),n})).catch((()=>{const n=WAPI.scope(i,!0,"error",t);return Object.assign(n,e),n}))}return n},window.WAPI.setGroupSettings=async function(e,t,n){if("string"!=typeof t||0===t.length)return WAPI.scope(void 0,!0,null,"It is necessary to write a settings!");const i=await WAPI.sendExist(e);if(i&&404!=i.status){const e={type:"setGroupSettings",settings:t},o=await WAPI.getchatId(i.id),a={type:"setGroupSettings",value:n};return window.Store.GroupSettings.sendSetGroupProperty(i.id,t,n).then((()=>{const t=WAPI.scope(o,!1,"OK",e,a);return Object.assign(t,e),t})).catch((()=>{const t=WAPI.scope(o,!0,"error",e,a);return Object.assign(t,e),t}))}return i},window.WAPI.sendListMenu=async function(e,t,n,i,o,a){if(!t&&"string"!=typeof t)return WAPI.scope(null,!0,404,"Enter the title variable as an string");if(!n&&"string"!=typeof n)return WAPI.scope(null,!0,404,"Enter the SubTitle variable as an string");if(!i&&"string"!=typeof i)return WAPI.scope(null,!0,404,"Enter the description variable as an string");if(!o&&"string"!=typeof o)return WAPI.scope(null,!0,404,"Enter the buttonText variable as an string");if(!a&&!1===Array.isArray(a))return WAPI.scope(null,!0,404,"Enter the menu variable as an array");for(let e in a)if("remove"!==e){if(!a[e].title||"string"!=typeof a[e].title||!a[e].title.length)return WAPI.scope(null,!0,404,"Incorrect Title passed in menu");if(!(a[e].rows&&Array.isArray(a[e].rows)&&a[e].rows.length))return WAPI.scope(null,!0,404,"Rows must be an object array");for(let t in a[e].rows)if("remove"!==t){if(!a[e].rows[t].title||!a[e].rows[t].title.length)return WAPI.scope(null,!0,404,"Enter the Title variable as an string");a[e].rows[t].description&&a[e].rows[t].description.length&&(a[e].rows[t].rowId||(a[e].rows[t].rowId=`dessert_${t}`))}}const r=await WAPI.sendExist(e);if(r&&404!=r.status&&r.id){const e=await window.WAPI.getNewMessageId(r.id._serialized),d=await Store.MaybeMeUser.getMaybeMeUser(),c=await WAPI.getchatId(r.id).catch((()=>{}));c&&(r.lastReceivedKey._serialized=c._serialized,r.lastReceivedKey.id=c.id);const l={id:e,ack:0,from:d,to:r.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,invis:!0,footer:n,notifyName:"",type:"list",interactiveAnnotations:!0,interactiveMessage:!0,star:!1,broadcast:!1,fromMe:!1,list:{title:t,description:i,buttonText:o,listType:1,sections:a}};var s=(await Promise.all(window.Store.addAndSendMsgToChat(r,l)))[1];return"success"===s||"OK"===s?WAPI.scope(e,!1,s,null):WAPI.scope(e,!0,s,null)}return r},window.WAPI.sendChatstate=async function(e,t){switch(e){case"0":await window.Store.ChatStates.sendChatStateComposing(t);break;case"1":await window.Store.ChatStates.sendChatStateRecording(t);break;case"2":await window.Store.ChatStates.sendChatStatePaused(t);break;default:return!1}return!0},window.WAPI.sendMessageWithThumb=function(e,t,n,i,o,a,r){var s=WAPI.getChat(a);if(void 0===s)return void 0!==r&&r(!1),!1;var d={canonicalUrl:t,description:i,matchedText:t,title:n,thumbnail:e};return s.sendMessage(o,{linkPreview:d,mentionedJidList:[],quotedMsg:null,quotedMsgAdminGroupJid:null}),void 0!==r&&r(!0),!0},window.WAPI.processMessageObj=function(e,t,n){return e.isNotification?n?WAPI._serializeMessageObj(e):void 0:!1===e.id.fromMe||t?WAPI._serializeMessageObj(e):void 0},window.WAPI.sendMessageWithTags=async function(e,t){var n=e.id?e:Store.Chat.get(e),i=n.id._serialized,o=n.msgs.filter((e=>e.__x_isSentByMe))[0];if(!o)return n.sendMessage(t);var a=Object.create(o),r=await window.WAPI.getNewMessageId(i),s=t.match(/@(\d*)/g).map((e=>new Store.WidFactory.createUserWid(e.replace("@",""))))||void 0,d={ack:0,id:r,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),to:new Store.WidFactory.createWid(i),isNewMsg:!0,type:"chat",body:t,quotedMsg:null,mentionedJidList:s};return Object.assign(a,d),await Store.addAndSendMsgToChat(n,a),r._serialized},window.WAPI.sendMessage=async function(e,t){if("string"!=typeof t||0===t.length)return WAPI.scope(void 0,!0,null,"It is necessary to write a text!");if("string"!=typeof e||0===e.length)return WAPI.scope(e,!0,404,"It is necessary to number");let n=await WAPI.sendExist(e);if(n&&404!=n.status&&n.id){const o={type:"sendText",text:t},a=await window.WAPI.getNewMessageId(n.id._serialized),r=await Store.MaybeMeUser.getMaybeMeUser();let s=await WAPI.getchatId(n.id).catch((()=>WAPI.scope(n.id,!0,404,"Error to number "+e)));if(s&&(n.lastReceivedKey&&n.lastReceivedKey._serialized&&(n.lastReceivedKey._serialized=s._serialized),n.lastReceivedKey&&n.lastReceivedKey.id&&(n.lastReceivedKey.id=s.id)),!a)return WAPI.scope(e,!0,404,"Error to newId");const d={id:a,ack:0,body:t,from:r,to:n.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat"};try{var i=(await Promise.all(window.Store.addAndSendMsgToChat(n,d)))[1];if("success"===i||"OK"===i){let e=WAPI.scope(a,!1,i,t);return Object.assign(e,o),e}}catch(e){let t=WAPI.scope(a,!0,i,"The message was not sent");return Object.assign(t,o),t}let c=WAPI.scope(a,!0,i,t);return Object.assign(c,o),c}return n.erro||(n.erro=!0),n},window.WAPI.sendMessage2=function(e,t,n){var i=WAPI.getChat(e);if(void 0!==i)try{return void 0!==n?i.sendMessage(t).then((function(){n(!0)})):i.sendMessage(t),!0}catch(e){return void 0!==n&&n(!1),!1}return void 0!==n&&n(!1),!1},window.WAPI.sendSeen=async function(e,t){if(!e)return!1;var n=window.WAPI.getChat(e);return void 0!==n?(await Store.ReadSeen.sendSeen(n,!1),t&&t(!0),!0):(t&&t(!1),!1)},window.WAPI.deleteConversation=function(e,t){let n=new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0}),i=WAPI.getChat(n);return i?(window.Store.sendDelete(i,!1).then((()=>{void 0!==t&&t(!0)})).catch((()=>{void 0!==t&&t(!1)})),!0):(void 0!==t&&t(!1),!1)},window.WAPI.deleteMessagesAll=async function(e,t,n){var i=new Store.WidFactory.createWid(e);let o=WAPI.getChat(i);if(!o)return!1;Array.isArray(t)||(t=[t]);let a=t.map((e=>"string"==typeof e?window.Store.Msg.get(e):e)).filter((e=>e));if(!a)return!0;let r=n?[o.sendDeleteMsgs?o.sendDeleteMsgs(a,o):Store.WapDeleteMsg.sendDeleteMsgs(o,a)]:[o.sendRevokeMsgs?o.sendRevokeMsgs(a.filter((e=>e.isSentByMe)),o):Store.WapDeleteMsg.sendRevokeMsgs(o,a.filter((e=>e.isSentByMe)),!0),o.sendDeleteMsgs?o.sendDeleteMsgs(a.filter((e=>!e.isSentByMe)),o):Store.WapDeleteMsg.sendDeleteMsgs(o,a.filter((e=>!e.isSentByMe)))];return Promise.all(r).then((e=>!0))},window.WAPI.deleteMessagesMe=async function(e,t,n){new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0});let i=window.Store.Chat.get(e);if(!i)return!1;Array.isArray(t)||(t=[t]);let o=t.map((e=>window.Store.Msg.get(e)));return n?i.sendRevokeMsgs(o,i):i.sendDeleteMsgs(o,i),!0},window.WAPI.clearChatMessages=async function(e){const t=await Store.Chat.get(e);return!!t&&await Store.ChatUtil.sendClear(t,t.lastReceivedKey,!0)},window.WAPI.sendImage=function(e,t,n,i){return u(e,t,n,i,"sendImage")},window.WAPI.sendPtt=async function(t,n){const i=await WAPI.sendExist(n);if(i&&404!=i.status){let n=await Store.Chat.find(i.id).then((async n=>{var i=e(t);return await l(n,i).then((async e=>{var t=(e.models||e._models)[0];return t.mediaPrep._mediaData.type="ptt",await t.mediaPrep.sendToChat(n,{})}))}));const o={type:"sendPtt"};let a=await WAPI.getchatId(i.id);if("success"===n||"OK"===n){let e=WAPI.scope(a,!1,n,null);return Object.assign(e,o),e}{let e=WAPI.scope(a,!0,n,null);return Object.assign(e,o),e}}return i},window.WAPI.sendFile=u,window.WAPI.setMyName=async function(e){await window.Store.Perfil.setPushname(e)},window.WAPI.setMyStatus=function(e){return Store.MyStatus.setMyStatus(e)},window.WAPI.sendVideoAsGif=function(t,n,i,o,a){const r=new Store.WidFactory.createWid(n);return Store.Chat.find(r).then((n=>{var r=e(t,i);l(n,r).then((e=>{var t=(e.models||e._models)[0];t.mediaPrep._mediaData.isGif=!0,t.mediaPrep._mediaData.gifAttribution=1,t.mediaPrep.sendToChat(n,{caption:o}),void 0!==a&&a(!0)}))}))},window.WAPI.processFiles=l,window.WAPI.sendImageWithProduct=function(t,n,i,o,a,r){Store.Catalog.findCarouselCatalog(o).then((o=>{if(o&&o[0]){const d=o[0].productCollection.get(a),c={productMsgOptions:{businessOwnerJid:d.catalogWid.toString({legacy:!0}),productId:d.id.toString(),url:d.url,productImageCount:d.productImageCollection.length,title:d.name,description:d.description,currencyCode:d.currency,priceAmount1000:d.priceAmount1000,type:"product"},caption:i};var s=new Store.WidFactory.createWid(n);return Store.Chat.find(s).then((n=>{var i=e(t,d.name);l(n,i).then((e=>{var t=(e.models||e._models)[0];Object.entries(c.productMsgOptions).map((([e,n])=>t.mediaPrep._mediaData[e]=n)),t.mediaPrep.sendToChat(n,c),void 0!==r&&r(!0)}))}))}}))},window.WAPI.sendContactVcard=async function(e,t,n){if("string"!=typeof e||0===e.length)return WAPI.scope(e,!0,404,"It is necessary to pass the number!");if("string"!=typeof t||0===t.length)return WAPI.scope(t,!0,404,"It is necessary to pass the number!");const i=await WAPI.sendExist(e),o=await WAPI.sendExist(t);if(i&&404!=i.status&&i.id&&o&&404!=o.status&&o.id){const s=await window.WAPI.getNewMessageId(i.id._serialized);let d=await WAPI.getchatId(i.id).catch((()=>WAPI.scope(i.id,!0,404,"Error to number "+e)));if(d&&(i.lastReceivedKey&&i.lastReceivedKey._serialized&&(i.lastReceivedKey._serialized=d._serialized),i.lastReceivedKey&&i.lastReceivedKey.id&&(i.lastReceivedKey.id=d.id)),!s)return WAPI.scope(e,!0,404,"Error to newId");const c=await Store.MaybeMeUser.getMaybeMeUser(),l=await window.Store.Vcard.vcardFromContactModel(o.__x_contact);n=n||o.__x_formattedTitle;const u={id:s,ack:0,body:l.vcard,from:c,to:i.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"vcard"},w=(await Promise.all(window.Store.addAndSendMsgToChat(i,u)))[1];var a={from:t,type:"vcard"};if("success"===w||"OK"===w){var r=WAPI.scope(s,!1,w,null);return Object.assign(r,a),r}return r=WAPI.scope(s,!0,w,null),Object.assign(r,a),r}return i},window.WAPI.sendContactVcardList=async function(e,t){if("string"!=typeof e)return WAPI.scope(e,!0,null,"incorrect parameter, insert an string. Example: '222222222222@c.us'");if(!Array.isArray(t))return WAPI.scope(e,!0,null,"incorrect parameter, insert an array. Example: ['222222222222@c.us', '333333333333@c.us, ... ]");if(1===t.length)return WAPI.scope(e,!0,null,"Enter more than one number to send. Example: ['222222222222@c.us', '333333333333@c.us, ... ]");const n=await WAPI.sendExist(e);if(n&&404!=n.status&&n.id){var i=t.map((async e=>await WAPI.sendExist(e))),o=await Promise.all(i),a=new Array;for(var r in o)"object"==typeof o[r]&&a.push(o[r].__x_contact);var s=a.map((async e=>{if("object"==typeof e)return await window.Store.Vcard.vcardFromContactModel(e)})),d=await window.WAPI.getNewMessageId(n.id._serialized);const e=await Store.MaybeMeUser.getMaybeMeUser();let f=await WAPI.getchatId(n.id).catch((()=>{}));f&&(n.lastReceivedKey._serialized=f._serialized,n.lastReceivedKey.id=f.id);var c=await Promise.all(s);const g={id:d,ack:0,from:e,local:!0,self:"in",t:parseInt((new Date).getTime()/1e3),to:n.id,type:"multi_vcard",vcardList:c,isNewMsg:!0};var l=(await Promise.all(Store.addAndSendMsgToChat(n,g)))[1]||"",u={from:t,type:"multi_vcard"};if("success"===l||"OK"===l){var w=WAPI.scope(d,!1,l,null);return Object.assign(w,u),w}return w=WAPI.scope(d,!0,l,null),Object.assign(w,u),w}return n},window.WAPI.forwardMessages=async function(e,t,n){var i=await WAPI.sendExist(e);Array.isArray(t)||(t=[t]);var o=(await Promise.all(t.map((async e=>await WAPI.getMessageById(e,null,!1))))).filter((e=>!n||!e.__x_isSentByMe)),a={type:"forwardMessages"};return new Promise((async(e,t)=>{if(i.id){let n=await window.WAPI.getNewMessageId(i.id._serialized),r=await WAPI.getchatId(i.id).catch((()=>{}));r&&(i.lastReceivedKey._serialized=r._serialized,i.lastReceivedKey.id=r.id),await Promise.each(o,(async e=>{if(void 0!==e.erro&&!0===e.erro){var o=WAPI.scope(i.id,!0,null,"message not found");return Object.assign(o,a),void t(o)}let r=await Object.create(i.msgs.filter((e=>e.__x_isSentByMe)))[0];const s=await window.Store.Conn.wid;let d=await Object.assign(e),c={id:n,ack:0,from:s,to:i.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,isForwarded:!0,forwardingScore:1,multicast:!0,__x_isSentByMe:!0};return Object.assign(r,d),Object.assign(r,c),await Store.addAndSendMsgToChat(i,r)})).then((async()=>{var t=WAPI.scope(n,!1,200,null);Object.assign(t,a),e(t)})).catch((()=>{var e=WAPI.scope(n,!0,404,null);Object.assign(e,a),t(e)}))}else t(i)}))},window.WAPI.reply=async function(e,t,n){if("string"!=typeof e)return WAPI.scope(null,!0,404,"enter the chatid variable as an string");if("string"!=typeof t)return WAPI.scope(null,!0,404,"enter the content variable as an string");if("string"!=typeof n)return WAPI.scope(null,!0,404,"enter the content variable as an string");const i=await WAPI.sendExist(e);if(i&&404!=i.status){let e=i.id;const o={type:"deleteMessages"};let a={},r=await WAPI.getMessageById(n,null,!1);if(null!=r.erro){let t=WAPI.scope(e,!0,404,`The id ${n} does not exist!`);return Object.assign(t,o),t}{let e=await WAPI.checkIdMessage(r.to._serialized,n);if(1==e.erro)return e}r&&r.canReply()&&(a=r.msgContextInfo(i));let s=await WAPI.checkIdMessage(i.id._serialized,n);if(1==s.erro)return s;const d=await window.WAPI.getNewMessageId(i.id._serialized);let c=await WAPI.getchatId(i.id).catch((()=>{}));c&&(i.lastReceivedKey._serialized=c._serialized,i.lastReceivedKey.id=c.id);const l={id:d,ack:0,body:t,from:await Store.MaybeMeUser.getMaybeMeUser(),to:i.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat",...a},u=(await Promise.all(window.Store.addAndSendMsgToChat(i,l)))[1];if("success"===u||"OK"===u){let e=WAPI.scope(d,!1,u,"");return Object.assign(e,o),e}{let e=WAPI.scope(d,!0,u,"");return Object.assign(e,o),e}}return i},window.WAPI._sendSticker=w,window.WAPI.encryptAndUploadFile=async function(e,t){try{const n=await i(t),a=o(32),r=(new AbortController).signal,s=await window.Store.UploadUtils.encryptAndUpload({blob:t,type:e,signal:r,mediaKey:a});return{...s,clientUrl:s.url,filehash:n,id:n,uploadhash:s.encFilehash,mediaBlob:t}}catch{return!1}},window.WAPI.sendImageAsSticker=f,window.WAPI.sendImageAsStickerGif=f,window.WAPI.startTyping=async function(e){const t=window.Store.WidFactory.createWid(e);if(!t)throw{error:!0,code:"chat_not_found",message:"Chat not found",chatId:e};return await Store.ChatState.sendChatStateComposing(t),{status:200}},window.WAPI.stopTyping=async function(e){const t=window.Store.WidFactory.createWid(e);if(!t)throw{error:!0,code:"chat_not_found",message:"Chat not found",chatId:e};return await Store.ChatState.sendChatStatePaused(t),{status:200}},window.WAPI.sendLocation=async function(e,t,n,i=null){const o=await WAPI.sendExist(e);if(isNaN(Number(t))||isNaN(Number(n)))return WAPI.scope(e,!0,null,"latitude and longitude must be numbers");if(o.erro)return o;{const e=await window.WAPI.getNewMessageId(o.id._serialized),a=await WAPI.getchatId(o.id).catch((()=>{})),r=await Store.MaybeMeUser.getMaybeMeUser();a&&(o.lastReceivedKey._serialized=a._serialized,o.lastReceivedKey.id=a.id);const s={ack:0,id:e,local:!0,self:"in",t:parseInt((new Date).getTime()/1e3),to:o.id,from:r,isNewMsg:!0,type:"location",lat:Number(t),lng:Number(n),loc:i},d=(await Promise.all(Store.addAndSendMsgToChat(o,s)))[1]||"";let c,l={latitude:t,longitude:n,title:i,type:"location"};return"success"==d||"OK"==d?(c=WAPI.scope(e,!1,d,null),Object.assign(c,l),c):(c=WAPI.scope(e,!0,d,null),Object.assign(c,l),c)}},window.WAPI.openChat=async function(e){const t=Store.Chat.get(e);return Store.Cmd.openChatBottom(t)},window.WAPI.openChatAt=async function(e,t){const n=Store.Chat.get(e),i=n.msgs._models.find((e=>e.id.id===t)),o={collection:n.msgs,msg:i,isUnreadDivider:!1};return await Store.Cmd._openChat(n,o)},window.WAPI.markUnseenMessage=async function(e){if(!e)return!1;var t=window.WAPI.getChat(e);return void 0!==t&&(await Store.ReadSeen.markUnread(t,!0),!0)},window.WAPI.sendLinkPreview=async function(e,t,n){n=n||"";const i={Protocol:"^(https?:\\/\\/)?",Domain:"((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|",IP:"((\\d{1,3}\\.){3}\\d{1,3}))",Port:"(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*",Query:"(\\?[;&a-z\\d%_.~+=-]*)?",End:"(\\#[-a-z\\d_]*)?$",Reg:()=>new RegExp(i.Protocol+i.Domain+i.IP+i.Port+i.Query+i.End,"i")};if(!i.Reg().test(t))return n="Use a valid HTTP protocol. Example: https://www.youtube.com/watch?v=V1bFr2SWP1",WAPI.scope(e,!0,null,n);var o=await WAPI.sendExist(e);if(o.erro)return o;{const e=await window.WAPI.getNewMessageId(o.id._serialized),i=await Store.MaybeMeUser.getMaybeMeUser();let a=await WAPI.getchatId(o.id).catch((()=>{}));a&&(o.lastReceivedKey._serialized=a._serialized,o.lastReceivedKey.id=a.id);const r={id:e,ack:0,body:n.includes(t)?n:`${t}\n${n}`,from:i,to:o.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat",subtype:"url",content:t,canonicalUrl:t,description:t,matchedText:t,title:t},s=(await Promise.all(window.Store.addAndSendMsgToChat(o,r)))[1];let d={type:"LinkPreview",url:t,text:n};if("success"===s||"OK"===s){let t=WAPI.scope(e,!1,s,null);return Object.assign(t,d),t}{let t=WAPI.scope(e,!0,s,null);return Object.assign(t,d),t}}},window.WAPI.sendMessageOptions=async function(e,t,n={}){const i=Store.Chat.get(e);let o={};n.attachment&&(o=await WWebJS.processMediaData(n.attachment,n.sendAudioAsVoice),t=o.preview,delete n.attachment);let a={};if(n.quotedMessageId){let e=await WAPI.getMessageById(n.quotedMessageId,null,!1);e&&e.canReply()&&(a=e.msgContextInfo(i)),delete n.quotedMessageId}n.mentionedJidList&&(n.mentionedJidList=n.mentionedJidList.map((e=>window.Store.Contact.get(e).id)));let r={};n.location&&(r={type:"location",loc:n.location.description,lat:n.location.latitude,lng:n.location.longitude},delete n.location);let s={};if(n.contactCard){let e=window.Store.Contact.get(n.contactCard);s={body:window.Store.VCard.vcardFromContactModel(e).vcard,type:"vcard",vcardFormattedName:e.formattedName},delete n.contactCard}else if(n.contactCardList)s={type:"multi_vcard",vcardList:n.contactCardList.map((e=>window.Store.Contact.get(e))).map((e=>window.Store.VCard.vcardFromContactModel(e))),body:void 0},delete n.contactCardList;else if(n.parseVCards&&"string"==typeof t&&t.startsWith("BEGIN:VCARD")){delete n.parseVCards;try{const e=await window.Store.VCard.parseVcard(t);e&&(s={type:"vcard",vcardFormattedName:await window.Store.VCard.vcardGetNameFromParsed(e)})}catch(e){}}if(n.linkPreview){delete n.linkPreview;const e=await window.Store.Validators.findLink(t);if(e){const t=await window.Store.Wap2.default.queryLinkPreview(e.url);t.preview=!0,t.subtype="url",n={...n,...t}}}const d=await window.WAPI.getNewMessageId(i.id._serialized),c=await Store.MaybeMeUser.getMaybeMeUser(),l={...n,id:d,ack:0,body:t,from:c,to:i.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat",...r,...o,...a,...s};return await window.Store.addAndSendMsgToChat(i,l),d._serialized},window.WAPI.sendButtons=async function(e,t,n,i){if("string"!=typeof t||0===t.length)return WAPI.scope(e,!0,404,"It is necessary to write a title!");if("string"!=typeof i||0===i.length)return WAPI.scope(e,!0,404,"It is necessary to write a subtitle!");if(Array.isArray(n)&&n.length>0)for(let t in n)if("function"!=typeof n[t]){if(!n[t].buttonText)return WAPI.scope(e,!0,404,"passed object buttonText");if("object"!=typeof n[t].buttonText)return WAPI.scope(e,!0,404,"passed object value in buttonText");if(!n[t].buttonText.displayText)return WAPI.scope(e,!0,404,"passed object displayText");if("string"!=typeof n[t].buttonText.displayText)return WAPI.scope(e,!0,404,"passed string value in displayText");n[t].buttonId||(n[t].buttonId=`id${t}`),n[t].type||(n[t].type=1)}const o=await WAPI.sendExist(e);if(o&&404!=o.status&&o.id){const e=await window.WAPI.getNewMessageId(o.id._serialized),s={id:e,ack:0,from:await Store.MaybeMeUser.getMaybeMeUser(),to:o.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat",body:t,caption:t,content:t,footer:i,isDynamicReplyButtonsMsg:!0,isForwarded:!1,isFromTemplate:!1,invis:!0,fromMe:!1};var a={dynamicReplyButtons:n,replyButtons:n};Object.assign(s,a);var r=(await Promise.all(window.Store.addAndSendMsgToChat(o,s)))[1];return"success"===r||"OK"===r?WAPI.scope(e,!1,r,null):WAPI.scope(e,!0,r,null)}return o},window.WAPI.blockContact=async function(e){if(!e)return!1;const t=window.Store.Contact.get(e);return void 0!==t&&(await Store.Block.blockContact(t),!0)},window.WAPI.unblockContact=async function(e){if(!e)return!1;const t=window.Store.Contact.get(e);return void 0!==t&&(await Store.Block.unblockContact(t),!0)},window.WAPI.getBlockList=async function(){let e=await Store.Blocklist,t=[];if(void 0!==e&&void 0!==e._index){for(let n in e._index)t.push(n);return t}return!1},window.WAPI.getAllContacts=function(){return window.Store.Contact.map((e=>WAPI._serializeContactObj(e))).filter((e=>!0===e.isUser))},window.WAPI.getMyContacts=function(e){const t=window.Store.Contact.filter((e=>!0===e.isMyContact)).map((e=>WAPI._serializeContactObj(e)));return void 0!==e&&e(t),t},window.WAPI.getContact=function(e,t){const n=window.Store.Contact.get(e);return void 0!==t&&t(window.WAPI._serializeContactObj(n)),window.WAPI._serializeContactObj(n)},window.WAPI.getAllChats=function(e){const t=window.Store.Chat.map((e=>WAPI._serializeChatObj(e)));return void 0!==e&&e(t),t},window.WAPI.haveNewMsg=r,window.WAPI.getAllChatsWithNewMsg=s,window.WAPI.getAllChatIds=function(e){const t=window.Store.Chat.map((e=>e.id._serialized||e.id));return void 0!==e&&e(t),t},window.WAPI.getAllNewMessages=function(){return s().map((e=>WAPI.getChat(e.id))).flatMap((e=>e.msgs._models.filter((e=>e.isNewMsg)))).map(WAPI._serializeMessageObj)||[]},window.WAPI.getAllUnreadMessages=async function(){const e=JSON.stringify(s().map((e=>WAPI.getChat(e.id._serialized))).map((e=>e.msgs._models.filter((e=>1===e.ack)))).flatMap((e=>e))||[]);return JSON.parse(e)},window.WAPI.getAllChatsWithMessages=async function(e){const t=[];e?t.push(WAPI.getAllChatsWithNewMsg().map((e=>WAPI.getChat(e.id._serialized)))):t.push(WAPI.getAllChatIds().map((e=>WAPI.getChat(e))));const n=(await Promise.all(t)).flatMap((e=>e)),i=JSON.stringify(n);return JSON.parse(i)},window.WAPI.getAllGroups=function(e){const t=window.Store.Chat.filter((e=>e.isGroup));return void 0!==e&&e(t),t},window.WAPI.getChat=function(e){if(!e)return!1;e="string"==typeof e?e:e._serialized;let t=window.Store.Chat.get(e);if(!t&&Store.Wid.validateWid(e)){const n=new window.Store.UserConstructor(e,{intentionallyUsePrivateConstructor:!0});t=window.Store.Chat.find(n)||!1}return t},window.WAPI.getStatus=async function(e){const t=Store.WidFactory.createWid(e);return await Store.MyStatus.getStatus(t)},window.WAPI.getChatByName=function(e,t){const n=window.Store.Chat.find((t=>t.name===e));return void 0!==t&&t(n),n},window.WAPI.getNewId=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},window.WAPI.getChatById=function(e){try{if(e){let t=WAPI.getChat(e);if(t)return WAPI._serializeChatObj(t)}throw!1}catch{return!1}},window.WAPI.getUnreadMessagesInChat=function(e,t,n,i){let o=WAPI.getChat(e).msgs._models,a=[];for(let e=o.length-1;e>=0;e--){if("remove"===e)continue;let i=o[e];if("boolean"==typeof i.isNewMsg&&!1!==i.isNewMsg){i.isNewMsg=!1;let e=WAPI.processMessageObj(i,t,n);e&&a.push(e)}}return void 0!==i&&i(a),a},window.WAPI.loadEarlierMessages=async function(e){const t=WAPI.getChat(e);if(t){const e=await window.Store.ConversationMsgs.loadEarlierMsgs(t);if(e)return e.map(WAPI._serializeMessageObj)}return!1},window.WAPI.loadAllEarlierMessages=c,window.WAPI.asyncLoadAllEarlierMessages=function(e,t){c(e),t()},window.WAPI.areAllMessagesLoaded=function(e,t){return WAPI.getChat(e).msgs.msgLoadState.noEarlierMsgs?(t&&t(!0),!0):(t&&t(!1),!1)},window.WAPI.loadEarlierMessagesTillDate=function(e,t,n){const i=WAPI.getChat(e),o=function(){i.msgs._models[0].t>t&&!i.msgs.msgLoadState.noEarlierMsgs?window.Store.ConversationMsgs.loadEarlierMsgs(i).then(o):n()};o()},window.WAPI.getAllGroupMetadata=function(e){const t=window.Store.GroupMetadata.default.map((e=>e.attributes));return void 0!==e&&e(t),t},window.WAPI.getGroupMetadata=async function(e,t){let n=await window.Store.WidFactory.createWid(e),i=await window.Store.GroupMetadata.default.find(n);return void 0!==t&&t(i),i},window.WAPI._getGroupParticipants=d,window.WAPI.getGroupParticipantIDs=async function(e,t){const n=(await d(e)).map((e=>e.id));return void 0!==t&&t(n),n},window.WAPI.getAllMessagesInChat=async function(e,t=!0,n=!0,i){const o="string"==typeof e&&await WAPI.getChat(e);if(o&&"boolean"==typeof t&&"boolean"==typeof n){let e=[];const a=o.msgs._models;for(const i in a){if("remove"===i)continue;const o=a[i];let r=WAPI.processMessageObj(o,t,n);r&&e.push(r)}return void 0!==i&&i(e),e}return await WAPI.sendExist(e)},window.WAPI.loadAndGetAllMessagesInChat=async function(e,t,n){return window.WAPI.loadAllEarlierMessages(e).then((()=>{let i=[];const o=window.WAPI.getChat(e).msgs._models;for(const e in o){if("remove"===e)continue;const a=o[e];let r=WAPI.processMessageObj(a,t,n);r&&i.push(r)}return i}))},window.WAPI.getUnreadMessages=function(e,t,n,i){const o=window.Store.Chat._models,a=[];for(const i in o){if(isNaN(i))continue;const r=o[i];let s=WAPI._serializeChatObj(r);s.messages=[];const d=r.msgs._models;for(let n=d.length-1;n>=0;n--){const i=d[n];if("boolean"==typeof i.isNewMsg&&!1!==i.isNewMsg){i.isNewMsg=!1;let n=WAPI.processMessageObj(i,e,t);n&&s.messages.push(n)}}if(s.messages.length>0)a.push(s);else if(n){let n=r.unreadCount;for(let i=d.length-1;i>=0;i--){const o=d[i];if(n>0){if(!o.isSentByMe){let i=WAPI.processMessageObj(o,e,t);s.messages.unshift(i),n-=1}}else{if(-1!==n)break;if(!o.isSentByMe){let n=WAPI.processMessageObj(o,e,t);s.messages.unshift(n);break}}}s.messages.length>0&&(r.unreadCount=0,a.push(s))}}return void 0!==i&&i(a),a},window.WAPI.getCommonGroups=async function(e,t){let n=[],i=window.WAPI.getAllGroups();for(let t in i)try{(await window.WAPI.getGroupParticipantIDs(i[t].id)).filter((t=>t==e)).length&&n.push(i[t])}catch(e){console.log("Error in group:"),console.log(i[t]),console.log(e)}return void 0!==t&&t(n),n},window.WAPI.getProfilePicFromServer=async function(e){return await Store.ProfilePicThumb.find(e).then((e=>e.eurl))},window.WAPI.downloadFile=async function(e){return await new Promise(((t,n)=>{let i=new XMLHttpRequest;i.onload=function(){if(4==i.readyState)if(200==i.status){let e=new FileReader;e.readAsDataURL(i.response),e.onload=function(n){t(e.result.substr(e.result.indexOf(",")+1))}}else console.error(i.statusText);else t(!1)},i.open("GET",e,!0),i.responseType="blob",i.send(null)}))},window.WAPI.downloadMedia=async function e(t){const n=await WAPI.getMessageById(t,null,!1);if(!n)throw{error:!0,code:"message_not_found",message:"Message not found"};if(!n.mediaData)throw{error:!0,code:"message_not_contains_media",message:"Message not contains media"};await n.downloadMedia(!0,1);let i=null;if(n.mediaData.mediaBlob?i=n.mediaData.mediaBlob.forceToBlob():n.mediaData.filehash&&(i=Store.BlobCache.get(n.mediaData.filehash)),!i&&n.mediaObject.type&&"VIDEO"===n.mediaObject.type)return delete n.mediaObject.type,n.type="document",e(t);if(!i)throw{error:!0,code:"media_not_found",message:"Media not found"};return await new Promise(((e,t)=>{let n=new FileReader;n.onloadend=function(t){e(n.result)},n.onabort=t,n.onerror=t,n.readAsDataURL(i)}))},window.WAPI.getNumberProfile=async function(e){if("string"!=typeof e||0===e.length)return WAPI.scope(e,!0,404,"It is necessary to number");const t=await WAPI.sendExist(e);if(t&&404!=t.status&&t.id){const e=await Store.MyStatus.getStatus(t);return await WAPI._serializeMeObj(e)}return t.erro||(t.erro=!0),t},window.WAPI.getMessageById=async function(e,t,n=!0){let i=window.Store.Msg.get(e),o={erro:!0};if(!i){const t=window.Store.Chat.get(e.remote);if(!t)return o;if(await t.loadEarlierMsgs(),i=window.Store.Msg.get(e),!i){const n=t.getSearchContext(e);n&&n.collection&&n.collection.loadAroundPromise&&await n.collection.loadAroundPromise,i=window.Store.Msg.get(e)}}if(!i)return o;let a=o;if(n)try{a=WAPI.processMessageObj(i,!0,!0)}catch(e){}else a=i;if("function"!=typeof t)return a;t(a)},window.WAPI.getNewMessageId=async function(e){const t=await WAPI.sendExist(e);if(t.id){const e=new Object;return e.fromMe=!0,e.id=await WAPI.getNewId().toUpperCase(),e.remote=new Store.WidFactory.createWid(t.id._serialized),e._serialized=`${e.fromMe}_${e.remote}_${e.id}`,new Store.MsgKey(e)}return!1},window.WAPI.getFileHash=i,window.WAPI.generateMediaKey=o,window.WAPI.arrayBufferToBase64=function(e){for(var t,n="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(e),a=o.byteLength,r=a%3,s=a-r,d=0;d<s;d+=3)n+=i[(16515072&(t=o[d]<<16|o[d+1]<<8|o[d+2]))>>18]+i[(258048&t)>>12]+i[(4032&t)>>6]+i[63&t];return 1==r?n+=i[(252&(t=o[s]))>>2]+i[(3&t)<<4]+"==":2==r&&(n+=i[(64512&(t=o[s]<<8|o[s+1]))>>10]+i[(1008&t)>>4]+i[(15&t)<<2]+"="),n},window.WAPI.getListMute=async function(e="all"){var t=(await window.Store.Mute)._models,n=new Array,i=new Array;for(var o in t)t[o].__x_isMuted?i.push(WAPI.interfaceMute(t[o])):n.push(WAPI.interfaceMute(t[o]));var a=null;switch(console.log(0,e),e){case"all":a=[{total:i.length+n.length,amountToMute:i.length,amountnoMute:n.length},i,n];break;case"toMute":a=[{total:i.length},i];break;case"noMute":a=[{total:n.length},n]}return a},window.WAPI.getHost=async function(){const e=await Store.MaybeMeUser.getMaybeMeUser(),t=await WAPI.sendExist(e._serialized),n=await Store.MyStatus.getStatus(t);return await WAPI._serializeMeObj(n)},window.WAPI.getMe=function(e){const t=window.Store.Contact.get(window.Store.Conn.me);return void 0!==e&&e(t.all),t.all},window.WAPI.isConnected=function(e){const t=null==document.querySelector('[data-testid="alert-phone"]')&&null==document.querySelector('[data-testid="alert-computer"]');return void 0!==e&&e(t),t},window.WAPI.isLoggedIn=function(e){const t=window.Store.Contact&&void 0!==window.Store.Contact.checksum;return void 0!==e&&e(t),t},window.WAPI.getBatteryLevel=function(){return Store.Me&&Store.Me.battery?Store.Me.battery:void 0},window.WAPI.base64ImageToFile=e,window.WAPI.base64ToFile=e,window.WAPI.restartService=async function(){return await Store.ServiceWorker.default.restart(),!0},window.WAPI.killServiceWorker=async function(){return await Store.ServiceWorker.default.killServiceWorker(),!0},window.WAPI.sendMute=async function(e,t,n){var i=await WAPI.sendExist(e);if(i.erro)return i;{let e=null;var o,a=null,r=null,s=await WAPI.getchatId(i.id),d=await window.Store.Mute.get(i.id),c={type:"sendMute",time:t,timeType:n};if("number"==typeof t&&"string"==typeof n){switch(n){case"hours":e=parseInt(new Date((new Date).setHours((new Date).getHours()+t)).getTime()/1e3);break;case"minutes":e=parseInt(new Date((new Date).setMinutes((new Date).getMinutes()+t)).getTime()/1e3);break;case"year":e=parseInt(new Date((new Date).setDate((new Date).getDate()+t)).getTime()/1e3)}await window.Store.SendMute.sendConversationMute(i.id,e,0).then((e=>{a=e})).catch((e=>{a=e}))}else r=!0,await window.Store.SendMute.sendConversationMute(i.id,0,d.__x_expiration).then((e=>{a=e})).catch((e=>{a=e}));if(200===a.status){r?(d.__x_expiration=0,d.__x_isMuted=!1):(d.__x_expiration=e,d.__x_isMuted=!0);var l=WAPI.scope(s,!1,a.status,null);return Object.assign(l,c),l}return o=r?"is not mute to remove":"This chat is already mute",l=WAPI.scope(s,!0,a.status,o),Object.assign(l,c),l}},window.WAPI._newMessagesQueue=[],window.WAPI._newMessagesBuffer=null!=sessionStorage.getItem("saved_msgs")?JSON.parse(sessionStorage.getItem("saved_msgs")):[],window.WAPI._newMessagesDebouncer=null,window.WAPI._newMessagesCallbacks=[],window.addEventListener("unload",window.WAPI._unloadInform,!1),window.addEventListener("beforeunload",window.WAPI._unloadInform,!1),window.addEventListener("pageunload",window.WAPI._unloadInform,!1),window.WAPI.sendMessageMentioned=async function(e,t,n){Array.isArray(n)||(n=[n]);const i=WAPI.getChat(e),o=await Store.Contact.serialize().filter((e=>n.includes(e.id.user)));i.sendMessage(t,{linkPreview:null,mentionedJidList:o.map((e=>e.id)),quotedMsg:null,quotedMsgAdminGroupJid:null})},window.WAPI.getProfilePicSmallFromId=async function(e){return await window.Store.ProfilePicThumb.find(e).then((async function(e){return void 0!==e.img&&await window.WAPI.downloadFileWithCredentials(e.img)}),(function(e){return!1}))},window.WAPI.getProfilePicFromId=async function(e){return await window.Store.ProfilePicThumb.find(e).then((async function(e){return void 0!==e.imgFull&&await window.WAPI.downloadFileWithCredentials(e.imgFull)}),(function(e){return!1}))},window.WAPI.downloadFileWithCredentials=async function(e){if(!axios||!e)return!1;const t=(await axios.get(e,{responseType:"arraybuffer"})).data;return btoa(new Uint8Array(t).reduce(((e,t)=>e+String.fromCharCode(t)),""))},window.WAPI.getChatIsOnline=async function(e){const t=Store.Chat.get(e);return!!t&&(await t.presence.subscribe(),t.presence.attributes.isOnline)},window.WAPI.getLastSeen=async function(e){const t=Store.Chat.get(e);return!!t&&(await t.presence.subscribe(),t.presence.chatstate.t||!1)},window.WAPI.getWAVersion=function(){return window.Debug.VERSION},window.WAPI.archiveChat=async function(e,t){return await Store.Archive.setArchive(Store.Chat.get(e),t).then((e=>!0)).catch((e=>!1))},window.WAPI.takeOver=async function(){return await Store.State.default.takeover(),!0},window.WAPI.onIncomingCall=function(e){return window.WAPI.waitForStore(["Call"],(()=>{window.Store.Call.on("add",e)})),!0},window.WAPI.onInterfaceChange=function(e){return window.WAPI.waitForStore("Stream",(()=>{const t=()=>({displayInfo:window.Store.Stream.displayInfo,mode:window.Store.Stream.mode,info:window.Store.Stream.info});e(t()),window.Store.Stream.on("change:info change:displayInfo change:mode",(()=>{e(t())}))})),!0},window.WAPI.setMessagesAdminsOnly=async function(e,t){return await Store.WapQuery.setGroupProperty(e,"announcement",t),!0},window.WAPI.logout=async function(){return!!window.Store.Login&&(await window.Store.Login.triggerCriticalSyncLogout(),!0)},window.WAPI.storePromises={},window.WAPI.waitForStore=async function(e,t){Array.isArray(e)||(e=[e]);const n=e=>void 0===window.Store[e],i=e.filter(n).map((e=>(window.WAPI.storePromises[e]||(window.WAPI.storePromises[e]=new Promise((t=>{let i=null;const o=a=>{(a&&a.detail||"")!==e&&n(e)||(window.removeEventListener("storeLoaded",o),clearInterval(i),t(!0))};window.addEventListener("storeLoaded",o),i=setInterval(o,1e3)}))),window.WAPI.storePromises[e]))),o=Promise.all(i);return"function"==typeof t&&o.then(t),await o},function(){let e=!1,t=()=>window.Store.State.Socket.stream;window.WAPI.onStreamChange=function(n){return window.WAPI.waitForStore("State",(()=>{window.Store.State.Socket.on("change:stream",(()=>n(t()))),e||(e=!0,n(t()))})),!0}}(),function(){let e=!1;const t=()=>window.Store.State.Socket.state;window.WAPI.onStateChange=function(n){return window.WAPI.waitForStore("State",(()=>{window.Store.State.Socket.on("change:state",(()=>n(t()))),e||(e=!0,n(t()))})),!0}}(),window.WAPI.waitForStore(["Chat","Msg"],(()=>{window.WAPI._newMessagesListener=window.Store.Msg.on("add",(e=>{if(e&&e.isNewMsg&&!e.isSentByMe){let t=window.WAPI.processMessageObj(e,!1,!1);t&&(window.WAPI._newMessagesQueue.push(t),window.WAPI._newMessagesBuffer.push(t)),!window.WAPI._newMessagesDebouncer&&window.WAPI._newMessagesQueue.length>0&&(window.WAPI._newMessagesDebouncer=setTimeout((()=>{let e=window.WAPI._newMessagesQueue;window.WAPI._newMessagesDebouncer=null,window.WAPI._newMessagesQueue=[];let t=[];window.WAPI._newMessagesCallbacks.forEach((function(n){void 0!==n.callback&&n.callback(e),!0===n.rmAfterUse&&t.push(n)})),t.forEach((function(e){let t=window.WAPI._newMessagesCallbacks.indexOf(e);window.WAPI._newMessagesCallbacks.splice(t,1)}))}),1e3))}}))})),window.WAPI._unloadInform=e=>{window.WAPI._newMessagesBuffer.forEach((e=>{Object.keys(e).forEach((t=>void 0===e[t]?delete e[t]:""))})),sessionStorage.setItem("saved_msgs",JSON.stringify(window.WAPI._newMessagesBuffer)),window.WAPI._newMessagesCallbacks.forEach((function(e){void 0!==e.callback&&e.callback({status:-1,message:"page will be reloaded, wait and register callback again."})}))},window.WAPI.waitNewMessages=function(e=!0,t){return window.WAPI._newMessagesCallbacks.push({callback:e=>{t(e)},rmAfterUse:e}),!0},window.WAPI.allNewMessagesListener=e=>window.WAPI.waitForStore(["Chat","Msg"],(()=>{window.Store.Msg.on("add",(t=>{t&&t.isNewMsg&&setTimeout((function(){let n=window.WAPI.processMessageObj(t,!0,!1);n&&e(n)}),3e3)}))})),window.WAPI.waitNewAcknowledgements=function(e){return window.WAPI.waitForStore(["Chat","Msg"],(()=>{Store.Msg.on("change:ack",(t=>{e(t)}))})),!0},window.WAPI.onAddedToGroup=function(e){return window.WAPI.waitForStore(["Chat","Msg"],(()=>{Store.Chat.on("add",(t=>{t&&t.isGroup&&e(t)}))})),!0},window.WAPI.onLiveLocation=async function(e,t){return await window.WAPI.waitForStore(["LiveLocation"],(()=>{var n=Store.LiveLocation.get(e);return!!n&&(n.participants.validLocations().map((e=>e.on("change:lastUpdated",((e,n,i)=>{console.log(e,n,i);const{id:o,lat:a,lng:r,accuracy:s,degrees:d,speed:c,lastUpdated:l}=e,u={id:o.toString(),lat:a,lng:r,accuracy:s,degrees:d,speed:c,lastUpdated:l};t(u)})))),!0)}))},window.WAPI.onParticipantsChanged=async function(e,t){return await window.WAPI.waitForStore(["Chat","Msg"],(()=>{const n=["invite","add","remove","leave","promote","demote"],i=window.Store.Chat.get(e),o=window.Store.GroupMetadata.default.get(e);g[e]||(g[e]={},o.participants.forEach((t=>{g[e][t.id.toString()]={subtype:"add",from:o.owner}})));let a=0;return i.on("change:groupMetadata.participants",(o=>i.on("all",((o,r)=>{const{isGroup:s,previewMessage:d}=r;if(s&&"change"===o&&d&&"gp2"===d.type&&n.includes(d.subtype)){const{subtype:n,from:o,recipients:r}=d,s=r[0].toString();g[e][s]&&g[e][r[0]].subtype==n||(0==a?a++:(g[e][s]={subtype:n,from:o},t({by:o.toString(),action:n,who:r}),i.off("all",this),a=0))}})))),!0}))})})()})();